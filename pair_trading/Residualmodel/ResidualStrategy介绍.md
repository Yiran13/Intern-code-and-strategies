### 背景介绍
ResidualStrategy是一种基于统计套利的配对策略。不同于传统CTA策略，该策略对交易品种有严格的统计学假设。该策略主要涉及的统计学知识有:**协整关系**,**线性回归** 和**均值回归**

### Residual策略描述
该策略需要同时交易两个品种A和B，且这两个品种需要满足**协整关系**(交易品种的选择是在**策略之外**进行的)。
从学术文献和网络上的资料可以得知，Residual策略基本上涉及下面的几点内容：

- 将A和B的收盘价序列记为 A(t),B(t)
- 对收盘价序列 A(t) 和 B(t) 做线性回归： A(t) = β * B(t) + α + R(t)
- 对线性回归的残差序列 R(t) 计算标准差，形成残差的标准差序列 S(t)
- 对线性回归的残差序列 R(t) 计算均值，形成残差的均值序列 M(t)
- 基于标准差和均值序列 S(t) 和 M(t)，形成残差的上轨和下轨序列 U(t)，D(t)
- 当残差突破上轨做空残差，残差跌破下轨做多残差

### Residual策略实现

- 将A和B的收盘价序列记为 Y(t),X(t)
- 对收盘价序列 Y(t) 和 X(t) 做**动态**线性回归： Y(t) = β * X(t) + α + R(t)
  - 用多少数据进行线性回归
  - 多久时间更新线性回归的参数
- 对线性回归的残差序列 R(t) 计算标准差，形成残差的标准差序列 S(t)
  - 计算标准差的时间窗
- 对线性回归的残差序列 R(t) 计算均值，形成残差的均值序列 M(t)
  - 计算均值的时间窗
- 基于标准差和均值序列 S(t) 和 M(t)，形成残差的上轨和下轨序列 U(t)，D(t)
  - 计算上轨的宽度
  - 计算下轨的宽度
- 当残差突破上轨做空残差，残差跌破下轨做多残差
  - 止盈退出
  - 止损退出
  - 交易过滤
